<ion-header mode="ios" class="ion-no-border">
	<ion-toolbar mode="ios" color="primary">
		<ion-buttons slot="start">
			<ion-back-button 
				defaultHref="/auth/login"
				routerLink="/auth/login"
				routerDirection="back"
				text=""
			>
			</ion-back-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content class="ion-padding" fullscreen>
	<div class="main-content">
		<ion-grid>
			<ion-row>
				<ion-col>
					<img src="assets/red.png">
					<p class="ion-text-center ion-padding-bottom">Register User Account</p>
	
					<form
						class="form"
						[formGroup]="registerForm"
						(ngSubmit)="register()"
					>

						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">Full name</ion-label>
							<ion-input type="text" formControlName="name" placeholder="eg:980528105610"></ion-input>
						</ion-item>

						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.name">
								<div 
									class="error-message"
									*ngIf="registerForm.get('name').hasError(message.type) && (registerForm.get('name').dirty || registerForm.get('name').touched)"
								>
									{{ message.message }}
								</div>
							</ng-container>
						</div>

						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">IC number</ion-label>
							<ion-input type="text" formControlName="identification_number" placeholder="eg:980528105610"></ion-input>
						</ion-item>

						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.identification_number">
								<div 
									class="error-message"
									*ngIf="registerForm.get('identification_number').hasError(message.type) && (registerForm.get('identification_number').dirty || registerForm.get('identification_number').touched)"
								>
									{{ message.message }}
								</div>
							</ng-container>
						</div>

						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">Mobile number</ion-label>
							<ion-input type="text" formControlName="mobile_number" placeholder="eg:0164567789"></ion-input>
						</ion-item>

						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.mobile_number">
								<div 
									class="error-message"
									*ngIf="registerForm.get('mobile_number').hasError(message.type) && (registerForm.get('mobile_number').dirty || registerForm.get('mobile_number').touched)"
								>
									{{ message.message }}
								</div>
							</ng-container>
						</div>

						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">Email</ion-label>
							<ion-input type="text" formControlName="username" placeholder="Username"></ion-input>
						</ion-item>
	
						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.username">
								<div 
									class="error-message"
									*ngIf="registerForm.get('username').hasError(message.type) && (registerForm.get('username').dirty || registerForm.get('username').touched)"
								>
									{{ message.message }}
								</div>
							</ng-container>
						</div>
	
						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">Password</ion-label>
							<ion-input type="text" formControlName="password1" placeholder="Password"></ion-input>
						</ion-item>
	
						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.password1">
								<div 
									class="error-message"
									*ngIf="registerForm.get('password1').hasError(message.type) && (registerForm.get('password1').dirty || registerForm.get('password1').touched)"
								>
									{{ message.message }}
								</div>
							</ng-container>
						</div>
	
						<ion-item lines="none" class="ion-no-padding ion-no-margin">
							<ion-label position="stacked">Confirm Password</ion-label>
							<ion-input type="password" formControlName="password2" placeholder="Confirm password"></ion-input>
						</ion-item>
	
						<div class="validation-errors">
							<ng-container *ngFor="let message of registerFormMessages.password2">
								<div 
									class="error-message"
									*ngIf="registerForm.get('password2').hasError(message.type) && (registerForm.get('password2').dirty || registerForm.get('password2').touched)">
									{{ message.message }}
								</div>
							</ng-container>
						</div>
	
						<div class="ion-text-center">
							<ion-button 
								*ngIf="!isLoading"
								type="submit"
								shape="round"
								color="primary"
								mode="ios"
								[disabled]="!registerForm.valid"
							>
								Register
							</ion-button>
						
							<ion-button
								disabled
								*ngIf="isLoading"
								shape="round"
								color="primary"
								mode="ios"
							>
								<ion-spinner name="bubbles"></ion-spinner>
							</ion-button>
							<p class="go-to-login">
								Already have an account? 
								<a (click)="navigatePage('/auth/login')">Try to Log In.</a>
							</p>
						</div>
					</form>
				</ion-col>
			</ion-row>
		</ion-grid>
	</div>
</ion-content>
