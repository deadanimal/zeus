function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function _createClass(i,e,n){return e&&_defineProperties(i.prototype,e),n&&_defineProperties(i,n),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{vcto:function(i,e,n){"use strict";n.r(e),n.d(e,"DashboardPageModule",(function(){return F}));var a=n("ofXK"),t=n("3Pt+"),o=n("TEn/"),r=n("tyNb"),c=[{appliance:"Microwave",description:"Turned off",created_date:"08:12 a.m"},{appliance:"Microwave",description:"On for 1 minutes",created_date:"08:10 a.m"},{appliance:"Toaster",description:"Turned off",created_date:"19/04 08:30 p.m"},{appliance:"Toaster",description:"Turned off",created_date:"19/04 08:29 p.m"}],s=n("MO+k"),l=n("wd/R"),b=n("fXoL"),p=n("ZcN4"),f=["canvasPower"],d=["canvasAppliance"];function g(i,e){1&i&&(b.Ob(0,"div"),b.Kb(1,"canvas",null,14),b.Nb())}function m(i,e){1&i&&(b.Ob(0,"div"),b.Kb(1,"canvas",null,15),b.Nb())}function u(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconLCD,b.kc)}}function h(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconLamp,b.kc)}}function v(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconLamp1,b.kc)}}function C(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconDryer,b.kc)}}function w(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconAirCond,b.kc)}}function y(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconDishwasher,b.kc)}}function O(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconToaster,b.kc)}}function k(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconDryer,b.kc)}}function N(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconDryer,b.kc)}}function I(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconMicrowave,b.kc)}}function z(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconAir,b.kc)}}function K(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconDeep,b.kc)}}function D(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconBlender,b.kc)}}function P(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconInduction,b.kc)}}function A(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconIron,b.kc)}}function B(i,e){if(1&i&&b.Kb(0,"img",21),2&i){var n=b.ac(2);b.fc("src",n.iconVacuum,b.kc)}}function M(i,e){if(1&i&&(b.Ob(0,"ion-item",16),b.Ob(1,"ion-avatar",17),b.mc(2,u,1,1,"img",18),b.mc(3,h,1,1,"img",18),b.mc(4,v,1,1,"img",18),b.mc(5,C,1,1,"img",18),b.mc(6,w,1,1,"img",18),b.mc(7,y,1,1,"img",18),b.mc(8,O,1,1,"img",18),b.mc(9,k,1,1,"img",18),b.mc(10,N,1,1,"img",18),b.mc(11,I,1,1,"img",18),b.mc(12,z,1,1,"img",18),b.mc(13,K,1,1,"img",18),b.mc(14,D,1,1,"img",18),b.mc(15,P,1,1,"img",18),b.mc(16,A,1,1,"img",18),b.mc(17,B,1,1,"img",18),b.Nb(),b.Ob(18,"ion-label",19),b.Ob(19,"h2"),b.nc(20),b.Nb(),b.Nb(),b.Ob(21,"ion-label",20),b.Ob(22,"p"),b.nc(23),b.Nb(),b.Nb(),b.Nb()),2&i){var n=e.$implicit;b.zb(2),b.fc("ngIf","TV"==n.appliance),b.zb(1),b.fc("ngIf","Lamp"==n.appliance),b.zb(1),b.fc("ngIf","Light"==n.appliance),b.zb(1),b.fc("ngIf","Fridge"==n.appliance),b.zb(1),b.fc("ngIf","AC"==n.appliance),b.zb(1),b.fc("ngIf","Dishwasher"==n.appliance),b.zb(1),b.fc("ngIf","Toaster"==n.appliance),b.zb(1),b.fc("ngIf","Dryer"==n.appliance),b.zb(1),b.fc("ngIf","Washing"==n.appliance),b.zb(1),b.fc("ngIf","Microwave"==n.appliance),b.zb(1),b.fc("ngIf","Air"==n.appliance),b.zb(1),b.fc("ngIf","Deep"==n.appliance),b.zb(1),b.fc("ngIf","Blender"==n.appliance),b.zb(1),b.fc("ngIf","Induction"==n.appliance),b.zb(1),b.fc("ngIf","Iron"==n.appliance),b.zb(1),b.fc("ngIf","Vacuum"==n.appliance),b.zb(3),b.oc(n.appliance),b.zb(3),b.oc(n.created_date)}}var S,H,T,_=[{path:"",component:(S=function(){function i(e,n){_classCallCheck(this,i),this.deviceService=e,this.router=n,this.activities=[],this.notiActivities=[],this.dataKiri=0,this.dataKanan=0,this.isFeedEmpty=!0,this.notifyMe=[],this.iconError="assets/img/default/404-error.svg",this.iconAirCond="assets/img/appliance/air-conditioner.svg",this.iconDishwasher="assets/img/appliance/dishwasher.svg",this.iconFridge="assets/img/appliance/fridge.svg",this.iconLamp="assets/img/appliance/lamp.svg",this.iconLamp1="assets/img/appliance/lamp-1.svg",this.iconLCD="assets/img/appliance/lcd.svg",this.iconMicrowave="assets/img/appliance/microwave.svg",this.iconToaster="assets/img/appliance/toaster.svg",this.iconDryer="assets/img/appliance/tumble-dryer.svg",this.iconAir="assets/img/appliance/air.svg",this.iconBlender="assets/img/appliance/blender.svg",this.iconDeep="assets/img/appliance/deep.svg",this.iconInduction="assets/img/appliance/induction.svg",this.iconIron="assets/img/appliance/iron.svg",this.iconVacuum="assets/img/appliance/vacuum.svg",this.getData(),this.getCSV()}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this;this.segment="P",this.intervalNoti=setInterval((function(){i.getNoti()}),1e4)}},{key:"getData",value:function(){this.activities=c,this.isFeedEmpty=0==this.activities.length}},{key:"view",value:function(){this.router.navigate(["/appliance-detail"])}},{key:"ionViewWillEnter",value:function(){this.initChartPower(),this.initChartAppliance()}},{key:"ngOnDestroy",value:function(){clearInterval(this.intervalCSV),clearInterval(this.intervalNoti)}},{key:"segmentChanged",value:function(i){var e=this;console.log("Segment: ",this.segment),console.log("Segment changed: ",i),"A"==this.segment&&setTimeout((function(){e.initChartAppliance()}),1e3),"P"==this.segment&&setTimeout((function(){e.initChartPower()}),1e3)}},{key:"initChartAppliance",value:function(){this.chartAppliance=new s.Chart(this.canvasAppliance.nativeElement,{type:"pie",data:{datasets:[{data:[55,120,155,160,95],backgroundColor:["red","orange","yellow","green","blue"],label:"Dataset 1"}],labels:["Lamp","Solar","Fridge","Microwave","Fan"]},options:{responsive:!0}})}},{key:"initChartPower",value:function(){this.chartPower=new s.Chart(this.canvasPower.nativeElement,{type:"line",data:{labels:[],datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1},{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(192,75,192,0.4)",borderColor:"rgba(192,75,192,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1},{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,75,0.4)",borderColor:"rgba(75,192,75,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1}]}})}},{key:"getCSV",value:function(){var i=this;this.intervalCSV=setInterval((function(){i.deviceService.getCSV().subscribe((function(e){var n=e.body.split(",");if(e.body.length<30){var a=l.unix(e.test).format("h:mm:ss a"),t=240*n[0]/1e3,o=240*n[1]/1e3,r=240*n[2]/1e3;i.dataKiri=(i.dataKiri+t+o+r)/60,i.dataKanan=(i.dataKanan+t+o+r)/50,i.chartPower.data.labels.push(a),i.chartPower.data.datasets[0].data.push(t),i.chartPower.data.datasets[1].data.push(o),i.chartPower.data.datasets[2].data.push(r),i.chartPower.update()}console.log()}))}),1e3)}},{key:"addData",value:function(i,e,n){}},{key:"getNoti",value:function(){var i=this;this.notiActivities=[],this.deviceService.getValue().subscribe((function(e){(e=e.sort((function(i,e){return i-e}))).forEach((function(e){e.time=l.unix(e.time).format("h:mm:ss a"),i.notiActivities.push(e)}))}),(function(){}),(function(){}))}}]),i}(),S.\u0275fac=function(i){return new(i||S)(b.Jb(p.a),b.Jb(r.g))},S.\u0275cmp=b.Db({type:S,selectors:[["app-dashboard"]],viewQuery:function(i,e){var n;1&i&&(b.qc(f,!0),b.qc(d,!0)),2&i&&(b.hc(n=b.Xb())&&(e.canvasPower=n.first),b.hc(n=b.Xb())&&(e.canvasAppliance=n.first))},decls:46,vars:15,consts:[["mode","ios",1,"ion-no-border"],["mode","ios","color","primary"],["mode","ios",3,"ngModel","ngModelChange","ionChange"],["value","A"],["value","P"],[4,"ngIf"],[1,"ion-text-right"],[1,"text-small"],["mode","ios",1,"ion-no-margin","list-core"],["mode","ios"],[3,"hidden"],[1,"error-img",3,"src"],[1,"error-text"],["lines","none",4,"ngFor","ngForOf"],["canvasAppliance",""],["canvasPower",""],["lines","none"],["slot","start"],[3,"src",4,"ngIf"],[1,"ion-text-wrap"],["slot","end",1,"ion-text-wrap","ion-text-right"],[3,"src"]],template:function(i,e){1&i&&(b.Ob(0,"ion-header",0),b.Ob(1,"ion-toolbar",1),b.Ob(2,"ion-title"),b.nc(3,"Dashboard"),b.Nb(),b.Nb(),b.Nb(),b.Ob(4,"ion-content"),b.Ob(5,"ion-segment",2),b.Wb("ngModelChange",(function(i){return e.segment=i}))("ionChange",(function(i){return e.segmentChanged(i)})),b.Ob(6,"ion-segment-button",3),b.Ob(7,"ion-label"),b.nc(8,"Appliance"),b.Nb(),b.Nb(),b.Ob(9,"ion-segment-button",4),b.Ob(10,"ion-label"),b.nc(11,"Power"),b.Nb(),b.Nb(),b.Nb(),b.mc(12,g,3,0,"div",5),b.mc(13,m,3,0,"div",5),b.Ob(14,"ion-grid"),b.Ob(15,"ion-row"),b.Ob(16,"ion-col",6),b.Ob(17,"ion-label"),b.Ob(18,"h1"),b.nc(19),b.bc(20,"number"),b.Ob(21,"span",7),b.nc(22,"kWh"),b.Nb(),b.Nb(),b.Ob(23,"p"),b.Ob(24,"span",7),b.nc(25,"RM0.70/hr"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(26,"ion-col"),b.Ob(27,"ion-label"),b.Ob(28,"h1"),b.nc(29),b.bc(30,"number"),b.Ob(31,"span",7),b.nc(32,"kWh"),b.Nb(),b.Nb(),b.Ob(33,"p"),b.Ob(34,"span",7),b.nc(35,"RM0.70/hr"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(36,"ion-list",8),b.Ob(37,"ion-list-header",9),b.Ob(38,"h3"),b.nc(39,"News Feed"),b.Nb(),b.Nb(),b.Ob(40,"div",10),b.Kb(41,"img",11),b.Ob(42,"p",12),b.nc(43,"No feeds loaded"),b.Nb(),b.Nb(),b.Ob(44,"div",10),b.mc(45,M,24,18,"ion-item",13),b.Nb(),b.Nb(),b.Nb()),2&i&&(b.zb(5),b.fc("ngModel",e.segment),b.zb(7),b.fc("ngIf","A"==e.segment),b.zb(1),b.fc("ngIf","P"==e.segment),b.zb(6),b.oc(b.cc(20,9,e.dataKiri,"1.2-2")),b.zb(10),b.oc(b.cc(30,12,e.dataKanan,"1.2-2")),b.zb(11),b.fc("hidden",!e.isFeedEmpty),b.zb(1),b.fc("src",e.iconError,b.kc),b.zb(3),b.fc("hidden",e.isFeedEmpty),b.zb(1),b.fc("ngForOf",e.activities))},directives:[o.p,o.M,o.K,o.m,o.z,o.S,t.g,t.i,o.A,o.u,a.j,o.o,o.y,o.l,o.v,o.w,a.i,o.t,o.c],pipes:[a.d],styles:[".error-img[_ngcontent-%COMP%]{display:grid;max-width:7rem!important;margin-top:3rem;margin-left:auto;margin-right:auto}.error-text[_ngcontent-%COMP%]{color:#9d9fa6;display:grid;font-size:.9rem;margin-left:4rem;margin-right:4rem;text-align:center}"]}),S)}],E=((T=function i(){_classCallCheck(this,i)}).\u0275mod=b.Hb({type:T}),T.\u0275inj=b.Gb({factory:function(i){return new(i||T)},imports:[[r.i.forChild(_)],r.i]}),T),F=((H=function i(){_classCallCheck(this,i)}).\u0275mod=b.Hb({type:H}),H.\u0275inj=b.Gb({factory:function(i){return new(i||H)},imports:[[a.b,t.e,o.N,E]]}),H)}}]);