(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{vcto:function(i,e,n){"use strict";n.r(e),n.d(e,"DashboardPageModule",(function(){return T}));var t=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),c=n("tyNb");const r=[{appliance:"Microwave",description:"Turned off",created_date:"08:12 a.m"},{appliance:"Microwave",description:"On for 1 minutes",created_date:"08:10 a.m"},{appliance:"Toaster",description:"Turned off",created_date:"19/04 08:30 p.m"},{appliance:"Toaster",description:"Turned off",created_date:"19/04 08:29 p.m"}];var s=n("MO+k"),b=n("wd/R"),p=n("fXoL"),l=n("ZcN4");const g=["canvasPower"],d=["canvasAppliance"];function m(i,e){1&i&&(p.Ob(0,"div"),p.Kb(1,"canvas",null,14),p.Nb())}function f(i,e){1&i&&(p.Ob(0,"div"),p.Kb(1,"canvas",null,15),p.Nb())}function h(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconLCD,p.kc)}}function u(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconLamp,p.kc)}}function v(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconLamp1,p.kc)}}function C(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconDryer,p.kc)}}function O(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconAirCond,p.kc)}}function w(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconDishwasher,p.kc)}}function N(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconToaster,p.kc)}}function y(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconDryer,p.kc)}}function k(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconDryer,p.kc)}}function I(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconMicrowave,p.kc)}}function z(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconAir,p.kc)}}function K(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconDeep,p.kc)}}function D(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconBlender,p.kc)}}function A(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconInduction,p.kc)}}function P(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconIron,p.kc)}}function B(i,e){if(1&i&&p.Kb(0,"img",21),2&i){const i=p.ac(2);p.fc("src",i.iconVacuum,p.kc)}}function M(i,e){if(1&i&&(p.Ob(0,"ion-item",16),p.Ob(1,"ion-avatar",17),p.mc(2,h,1,1,"img",18),p.mc(3,u,1,1,"img",18),p.mc(4,v,1,1,"img",18),p.mc(5,C,1,1,"img",18),p.mc(6,O,1,1,"img",18),p.mc(7,w,1,1,"img",18),p.mc(8,N,1,1,"img",18),p.mc(9,y,1,1,"img",18),p.mc(10,k,1,1,"img",18),p.mc(11,I,1,1,"img",18),p.mc(12,z,1,1,"img",18),p.mc(13,K,1,1,"img",18),p.mc(14,D,1,1,"img",18),p.mc(15,A,1,1,"img",18),p.mc(16,P,1,1,"img",18),p.mc(17,B,1,1,"img",18),p.Nb(),p.Ob(18,"ion-label",19),p.Ob(19,"h2"),p.nc(20),p.Nb(),p.Nb(),p.Ob(21,"ion-label",20),p.Ob(22,"p"),p.nc(23),p.Nb(),p.Nb(),p.Nb()),2&i){const i=e.$implicit;p.zb(2),p.fc("ngIf","TV"==i.appliance),p.zb(1),p.fc("ngIf","Lamp"==i.appliance),p.zb(1),p.fc("ngIf","Light"==i.appliance),p.zb(1),p.fc("ngIf","Fridge"==i.appliance),p.zb(1),p.fc("ngIf","AC"==i.appliance),p.zb(1),p.fc("ngIf","Dishwasher"==i.appliance),p.zb(1),p.fc("ngIf","Toaster"==i.appliance),p.zb(1),p.fc("ngIf","Dryer"==i.appliance),p.zb(1),p.fc("ngIf","Washing"==i.appliance),p.zb(1),p.fc("ngIf","Microwave"==i.appliance),p.zb(1),p.fc("ngIf","Air"==i.appliance),p.zb(1),p.fc("ngIf","Deep"==i.appliance),p.zb(1),p.fc("ngIf","Blender"==i.appliance),p.zb(1),p.fc("ngIf","Induction"==i.appliance),p.zb(1),p.fc("ngIf","Iron"==i.appliance),p.zb(1),p.fc("ngIf","Vacuum"==i.appliance),p.zb(3),p.oc(i.appliance),p.zb(3),p.oc(i.created_date)}}const S=[{path:"",component:(()=>{class i{constructor(i,e){this.deviceService=i,this.router=e,this.activities=[],this.notiActivities=[],this.dataKiri=0,this.dataKanan=0,this.isFeedEmpty=!0,this.notifyMe=[],this.iconError="assets/img/default/404-error.svg",this.iconAirCond="assets/img/appliance/air-conditioner.svg",this.iconDishwasher="assets/img/appliance/dishwasher.svg",this.iconFridge="assets/img/appliance/fridge.svg",this.iconLamp="assets/img/appliance/lamp.svg",this.iconLamp1="assets/img/appliance/lamp-1.svg",this.iconLCD="assets/img/appliance/lcd.svg",this.iconMicrowave="assets/img/appliance/microwave.svg",this.iconToaster="assets/img/appliance/toaster.svg",this.iconDryer="assets/img/appliance/tumble-dryer.svg",this.iconAir="assets/img/appliance/air.svg",this.iconBlender="assets/img/appliance/blender.svg",this.iconDeep="assets/img/appliance/deep.svg",this.iconInduction="assets/img/appliance/induction.svg",this.iconIron="assets/img/appliance/iron.svg",this.iconVacuum="assets/img/appliance/vacuum.svg",this.getData(),this.getCSV()}ngOnInit(){this.segment="P",this.intervalNoti=setInterval(()=>{this.getNoti()},1e4)}getData(){this.activities=r,this.isFeedEmpty=0==this.activities.length}view(){this.router.navigate(["/appliance-detail"])}ionViewWillEnter(){this.initChartPower(),this.initChartAppliance()}ngOnDestroy(){clearInterval(this.intervalCSV),clearInterval(this.intervalNoti)}segmentChanged(i){console.log("Segment: ",this.segment),console.log("Segment changed: ",i),"A"==this.segment&&setTimeout(()=>{this.initChartAppliance()},1e3),"P"==this.segment&&setTimeout(()=>{this.initChartPower()},1e3)}initChartAppliance(){this.chartAppliance=new s.Chart(this.canvasAppliance.nativeElement,{type:"pie",data:{datasets:[{data:[55,120,155,160,95],backgroundColor:["red","orange","yellow","green","blue"],label:"Dataset 1"}],labels:["Lamp","Solar","Fridge","Microwave","Fan"]},options:{responsive:!0}})}initChartPower(){this.chartPower=new s.Chart(this.canvasPower.nativeElement,{type:"line",data:{labels:[],datasets:[{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1},{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(192,75,192,0.4)",borderColor:"rgba(192,75,192,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1},{label:"",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,75,0.4)",borderColor:"rgba(75,192,75,0.4)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[],spanGaps:!1}]}})}getCSV(){this.intervalCSV=setInterval(()=>{this.deviceService.getCSV().subscribe(i=>{let e=i.body.split(",");if(i.body.length<30){let n=b.unix(i.test).format("h:mm:ss a"),t=240*e[0]/1e3,a=240*e[1]/1e3,o=240*e[2]/1e3;this.dataKiri=(this.dataKiri+t+a+o)/60,this.dataKanan=(this.dataKanan+t+a+o)/50,this.chartPower.data.labels.push(n),this.chartPower.data.datasets[0].data.push(t),this.chartPower.data.datasets[1].data.push(a),this.chartPower.data.datasets[2].data.push(o),this.chartPower.update()}console.log()})},1e3)}addData(i,e,n){}getNoti(){this.notiActivities=[],this.deviceService.getValue().subscribe(i=>{(i=i.sort((i,e)=>i-e)).forEach(i=>{i.time=b.unix(i.time).format("h:mm:ss a"),this.notiActivities.push(i)})},()=>{},()=>{})}}return i.\u0275fac=function(e){return new(e||i)(p.Jb(l.a),p.Jb(c.g))},i.\u0275cmp=p.Db({type:i,selectors:[["app-dashboard"]],viewQuery:function(i,e){var n;1&i&&(p.qc(g,!0),p.qc(d,!0)),2&i&&(p.hc(n=p.Xb())&&(e.canvasPower=n.first),p.hc(n=p.Xb())&&(e.canvasAppliance=n.first))},decls:46,vars:15,consts:[["mode","ios",1,"ion-no-border"],["mode","ios","color","primary"],["mode","ios",3,"ngModel","ngModelChange","ionChange"],["value","A"],["value","P"],[4,"ngIf"],[1,"ion-text-right"],[1,"text-small"],["mode","ios",1,"ion-no-margin","list-core"],["mode","ios"],[3,"hidden"],[1,"error-img",3,"src"],[1,"error-text"],["lines","none",4,"ngFor","ngForOf"],["canvasAppliance",""],["canvasPower",""],["lines","none"],["slot","start"],[3,"src",4,"ngIf"],[1,"ion-text-wrap"],["slot","end",1,"ion-text-wrap","ion-text-right"],[3,"src"]],template:function(i,e){1&i&&(p.Ob(0,"ion-header",0),p.Ob(1,"ion-toolbar",1),p.Ob(2,"ion-title"),p.nc(3,"Dashboard"),p.Nb(),p.Nb(),p.Nb(),p.Ob(4,"ion-content"),p.Ob(5,"ion-segment",2),p.Wb("ngModelChange",(function(i){return e.segment=i}))("ionChange",(function(i){return e.segmentChanged(i)})),p.Ob(6,"ion-segment-button",3),p.Ob(7,"ion-label"),p.nc(8,"Appliance"),p.Nb(),p.Nb(),p.Ob(9,"ion-segment-button",4),p.Ob(10,"ion-label"),p.nc(11,"Power"),p.Nb(),p.Nb(),p.Nb(),p.mc(12,m,3,0,"div",5),p.mc(13,f,3,0,"div",5),p.Ob(14,"ion-grid"),p.Ob(15,"ion-row"),p.Ob(16,"ion-col",6),p.Ob(17,"ion-label"),p.Ob(18,"h1"),p.nc(19),p.bc(20,"number"),p.Ob(21,"span",7),p.nc(22,"kWh"),p.Nb(),p.Nb(),p.Ob(23,"p"),p.Ob(24,"span",7),p.nc(25,"RM0.70/hr"),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Ob(26,"ion-col"),p.Ob(27,"ion-label"),p.Ob(28,"h1"),p.nc(29),p.bc(30,"number"),p.Ob(31,"span",7),p.nc(32,"kWh"),p.Nb(),p.Nb(),p.Ob(33,"p"),p.Ob(34,"span",7),p.nc(35,"RM0.70/hr"),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Ob(36,"ion-list",8),p.Ob(37,"ion-list-header",9),p.Ob(38,"h3"),p.nc(39,"News Feed"),p.Nb(),p.Nb(),p.Ob(40,"div",10),p.Kb(41,"img",11),p.Ob(42,"p",12),p.nc(43,"No feeds loaded"),p.Nb(),p.Nb(),p.Ob(44,"div",10),p.mc(45,M,24,18,"ion-item",13),p.Nb(),p.Nb(),p.Nb()),2&i&&(p.zb(5),p.fc("ngModel",e.segment),p.zb(7),p.fc("ngIf","A"==e.segment),p.zb(1),p.fc("ngIf","P"==e.segment),p.zb(6),p.oc(p.cc(20,9,e.dataKiri,"1.2-2")),p.zb(10),p.oc(p.cc(30,12,e.dataKanan,"1.2-2")),p.zb(11),p.fc("hidden",!e.isFeedEmpty),p.zb(1),p.fc("src",e.iconError,p.kc),p.zb(3),p.fc("hidden",e.isFeedEmpty),p.zb(1),p.fc("ngForOf",e.activities))},directives:[o.p,o.M,o.K,o.m,o.z,o.S,a.g,a.i,o.A,o.u,t.j,o.o,o.y,o.l,o.v,o.w,t.i,o.t,o.c],pipes:[t.d],styles:[".error-img[_ngcontent-%COMP%]{display:grid;max-width:7rem!important;margin-top:3rem;margin-left:auto;margin-right:auto}.error-text[_ngcontent-%COMP%]{color:#9d9fa6;display:grid;font-size:.9rem;margin-left:4rem;margin-right:4rem;text-align:center}"]}),i})()}];let H=(()=>{class i{}return i.\u0275mod=p.Hb({type:i}),i.\u0275inj=p.Gb({factory:function(e){return new(e||i)},imports:[[c.i.forChild(S)],c.i]}),i})(),T=(()=>{class i{}return i.\u0275mod=p.Hb({type:i}),i.\u0275inj=p.Gb({factory:function(e){return new(e||i)},imports:[[t.b,a.e,o.N,H]]}),i})()}}]);